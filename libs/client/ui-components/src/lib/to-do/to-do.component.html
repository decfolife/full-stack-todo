<div class="todo" *ngIf="todo" [formGroup]="todoForm">
  <div class="todo__header">
    <button
      class="btn btn--sm todo__completed"
      [class.todo__completed--true]="todo.completed"
      (click)="triggerToggleComplete()"
    >
      <fa-stack>
        <fa-icon [icon]="faCircleOutline" stackItemSize="2x"></fa-icon>
        <fa-icon
          [icon]="faCheck"
          stackItemSize="1x"
          *ngIf="todo.completed"
        ></fa-icon>
      </fa-stack>
    </button>

    <editable
      (save)="saveEdit()"
      (cancel)="cancelEdit()"
      openBindingEvent="dblclick"
    >
      <ng-template viewMode
        ><h4 class="todo__title">{{ todo.title }}</h4></ng-template
      >
      <ng-template editMode>
        <input
          class="form-control h4"
          formControlName="title"
          editableOnEnter
          editableOnEscape
        />
      </ng-template>
    </editable>
  </div>

  <div class="todo__body">
    <editable
      (save)="saveEdit()"
      (cancel)="cancelEdit()"
      openBindingEvent="dblclick"
    >
      <ng-template viewMode>
        <p class="todo__description">{{ todo.description }}</p>
      </ng-template>

      <ng-template editMode>
        <textarea
          editableOnEnter
          editableOnEscape
          class="form-control"
          formControlName="description"
        ></textarea>
      </ng-template>
    </editable>
  </div>

  <div class="todo__footer">
    <div class="todo__actions">
      <button class="btn btn--danger btn--sm" (click)="triggerDelete()">
        <fa-icon [icon]="faTrashCan"></fa-icon>
      </button>
    </div>
  </div>
</div>
